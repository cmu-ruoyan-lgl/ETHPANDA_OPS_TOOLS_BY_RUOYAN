发布内容：

---

作者：@0xJaehaerys

原文链接：https://x.com/0xJaehaerys/status/1960051628129865918

## 标题：告别EVM，拥抱RISC-V：以太坊迈向10,000 TPS的ZK之路

公众号合集：#以太坊

标题备选：

1. 以太坊最大架构变革：从EVM到RISC-V的进化之路
2. ZK原生时代：为什么以太坊必须放弃EVM？
3. 100倍性能提升：RISC-V如何重塑以太坊的未来

## 头图：

以太坊架构演进图：从EVM到RISC-V的技术转型

## 引言：

以太坊正在准备自上线以来最重大的架构转变：用RISC-V替换EVM。这个决定背后的原因很简单——在ZK优先的未来中，EVM已成为瓶颈。本文将深入分析这一历史性变革的技术原理、实施路径以及对整个生态系统的深远影响。

## 正文：

**以太坊的十字路口**

以太坊现在正处于自上线以来最重大架构演进的门槛。讨论不再围绕增量升级，而是其计算核心的根本性重构：以太坊虚拟机（EVM）的替换。这一倡议是更广泛的"精简以太坊"愿景的基石，旨在系统性简化整个协议，将其分解为三个核心组件：精简共识、精简数据、精简执行。

正如以太坊基金会的Justin Drake所说，长期目标一直是"将一切SNARK化"[1]，这是一个强大的工具，用于增强协议的每一层。长期以来，这"有点像是空中楼阁，因为我们具体需要的是实时证明这一概念"[1]。现在实时证明正在成为现实，EVM的理论低效性已成为一个实际而紧迫的问题。

**正在改变什么？**

在深入探讨"为什么"之前，了解"什么"至关重要。

EVM是以太坊上智能合约的运行时环境。它是处理交易并更新区块链状态的"世界计算机"。多年来，其设计具有革命性，创建了一个无需许可的平台，催生了整个DeFi和NFT生态系统。然而，其定制化、近十年历史的架构现在承载着巨大的技术债务。

另一方面，RISC-V不是产品，而是开放标准——设计处理器的免费通用"字母表"。正如Jeremy Bruestle在Ethproofs通话中强调的，其关键原则使其独特适合这一角色：

- **极简主义**：基础指令集极其简单，仅包含约40-47条指令。用Jeremy的话说，这"几乎完美适合我们超级极简通用机器的用例"[2]
- **模块化**：通过可选扩展添加更复杂的功能。这至关重要，因为它允许一个可以按需扩展的简单核心，而不会将不必要的复杂性强加到基础协议中
- **开放生态**：由庞大的成熟工具链支持，包括LLVM编译器，允许开发者使用Rust、C++和Go等主流语言。正如Justin Drake提到的，"编译器和编译器周围有很多工具，编译器极其难构建...因此拥有这个编译器工具链有很多价值"[2]。RISC-V允许以太坊免费继承这项工作

**解释器开销问题**

最紧迫的驱动因素是在零知识证明系统中EVM的固有低效性。随着以太坊转向L1状态由ZK证明验证的模式，证明器性能成为最终瓶颈。

当前zkEVM方法创造了不必要的复杂性。问题在于当前zkEVM的工作方式。它们不直接证明EVM，而是证明一个本身被编译为RISC-V的EVM解释器。Vitalik Buterin[2]直接解释了这个根本问题：

"如果zkVM的实现方式是通过获取EVM执行并将其编译成最终成为RISC-V代码的东西，那么为什么不直接将底层RISC-V暴露给智能合约开发者呢？这样你就可以完全移除整个虚拟机开销的外层。"

这额外的解释层造成了巨大的性能损失。估计显示，与证明原生程序相比，这创造了50-800倍的减速。在其他瓶颈如哈希被优化后（例如通过切换到Poseidon），这个"块执行"部分将消耗80-90%的所有证明时间，使EVM成为扩展L1的最终和最可怕的障碍。通过移除这一层，Vitalik估计执行效率可能提高100倍。

**预编译债务陷阱**

为了解决EVM在特定密码操作中的糟糕性能，以太坊引入了预编译合约——直接硬编码到协议中的专用函数。虽然这在当时是一个务实的解决方案，但这导致了Vitalik Buterin[2]称之为"可怕"的情况：

"预编译对我们来说一直很可怕...它们极大地膨胀了以太坊的可信代码库...它们是我们一些最严重的共识失败未遂事件的原因。"

复杂性令人震惊。Vitalik通过比较单个预编译modexp的包装代码与整个RISC-V解释器来说明这一点——观察到预编译的逻辑实际上要复杂得多。添加新预编译需要缓慢且政治敏感的分叉过程，这抑制了需要新密码原语的应用程序的创新。这使Vitalik得出了一个坚定的结论：

"我实际上认为我们应该从今天开始暂停任何新的预编译。"[2]

**以太坊架构技术债务**

EVM的核心设计反映了一个过去时代的优先事项，不适合现代计算。

为处理密码值而选择的256位架构对于大多数智能合约操作来说效率极低，这些操作通常使用32位或64位整数。这种低效在ZK系统中尤其昂贵。正如Vitalik[2]所解释的：

"当你使用较小的数字时，你实际上不会从每个单独的数字中获得任何节省，复杂度会以两到四倍的因子爆炸。"

此外，其基于栈的架构比RISC-V和现代CPU的基于寄存器的模型效率更低。它需要更多指令来执行相同操作，并使编译器优化复杂化。

**RISC-V蓝图——在更强大的基础上构建**

RISC-V的案例不仅仅是关于EVM的缺陷；它是关于RISC-V设计哲学的固有优势。其架构为以太坊这样的高风险环境提供了强大、简单且可验证的完美基础。

**为什么开放标准胜过定制设计**

与需要从头构建整个软件生态系统的定制ISA不同，RISC-V是一个成熟的开放标准。这提供了三个关键优势：

**成熟生态系统**。通过采用RISC-V，以太坊利用了几十年计算机科学的集体进步。正如Justin Drake解释的，这提供了对世界级工具的即时访问：

"有一个名为LLVM的基础设施组件，一个编译器工具链，允许你获取高级编程语言并将它们编译到广泛的后端。支持的后端之一是RISC-V。因此，如果你支持RISC-V，你就自动支持LLVM启用的所有高级语言。"[2]

这大大降低了精通Rust、C++和Go等语言的数百万开发者的进入门槛。

**设计简洁**。RISC-V的极简主义是刻意特性，不是限制。仅有约47条指令的基础，虚拟机的核心仍然极其简单。这种简单性是安全的深刻优势，因为较小的可信代码库更容易审计和形式验证。

**ZK空间的实际标准化**。至关重要的是，zkVM生态系统已经做出了选择。正如Justin Drake强调的，从Ethproofs数据中出现了明确的模式：

"RISC-V是zkVM后端的领先ISA。"[2]

在十个能够证明以太坊块的zkVM中，九个已经针对RISC-V。这种市场趋同是一个强有力的信号；通过采用RISC-V，以太坊不是在做出投机性赌注，而是与一个已经被构建其ZK未来的项目实战测试和验证的标准保持一致。

**为信任而设计，不仅仅是执行**

除了其生态系统外，RISC-V的内部架构独特适合构建安全和可验证的系统。

首先，它有一个正式的、机器可读的规范，称为SAIL。这是对EVM规范的重大改进，EVM规范主要作为散文文档（黄皮书）存在，可能模糊不清。SAIL规范作为"黄金标准"，实现了对保护巨大价值的协议至关重要的正确性数学证明。

其次，RISC-V包括特权架构，这是一个经常被忽视但对安全至关重要的特性。它定义了不同的操作级别，主要是用户模式（用于不受信任的应用程序，如智能合约）和监督员模式（用于受信任的"执行内核"）。Cartesi的Diego解释了其重要性：

"操作系统本身必须保护自己免受其他代码的侵害。它需要保持不同程序彼此分离运行，所有这些机制都是RISC-V标准的一部分。"[2]

在这个模型中，在用户模式下运行的智能合约不能直接访问区块链的状态。相反，它必须通过特殊的ECALL（环境调用）指令向在监督员模式下运行的可信内核发出请求。这创建了一个硬件强制安全边界——比EVM的纯基于软件的沙箱更健壮和可验证的模型。

**Vitalik的愿景**

过渡被设想为一个渐进的、多阶段过程，以确保稳定性和向后兼容性。这种方法由Vitalik Buterin概述，旨在进化而非革命：

**步骤1：预编译替换**。第一个、最保守的步骤是以有限容量引入新的VM。正如Vitalik建议的，"我们首先在有限的情况下使用新的VM。例如替换预编译"[2]。这将涉及暂停新的EVM预编译，而是将任何需要的功能实现为白名单RISC-V程序。这允许新VM在主网上以低风险环境进行实战测试。

**步骤2：双VM共存**。下一阶段将"使这个新的VM直接对用户可用"[2]。合约可以部署一个标志，指示其字节码是EVM还是RISC-V。关键功能是确保无缝互操作性："两种类型的合约将能够相互调用"[2]。这将通过系统调用（ECALL）接口实现，以太坊客户端充当两个执行环境之间的中介。

**步骤3：作为模拟合约的EVM（"Rosetta"策略）**。终局是实现最终的协议简化。在这个阶段，"我们将EVM作为新VM内部的实现"[2]。规范的EVM将成为一个在原生RISC-V L1上运行的正式验证智能合约。这确保对遗留应用程序的永久支持，同时允许客户端开发者仅维护一个单一的、最小的执行引擎。

**生态系统的连锁反应**

从EVM到RISC-V的提议过渡远远超出了核心协议，在整个以太坊生态系统中产生深远涟漪。

**Rollup重新对齐：乐观vs ZK**

L1上转向RISC-V执行层将对两个主要类别的rollup产生深远且分歧的后果。

**乐观Rollup**（Arbitrum、Optimism）依赖于在L1上重新执行争议交易的欺诈证明。随着以太坊L1转向RISC-V，这些系统不会根本改变。正如Optimism联合创始人解释的："如果我们将以太坊切换到RISC-V，乐观链不会中断。你只需将RISC-V VM编译到证明程序中。也不需要使用Asterisc。现有的基于MIPS的证明系统不会中断——你只需将RISC-V VM编译到MIPS。"[2]

这意味着欺诈证明模型保持完整。调整是技术性的：将新的RISC-V VM编译到现有基础设施中，而不是从头重新设计系统。剩余的挑战是工程细节，如gas计量、效率和成本。

**ZK Rollup**相比之下获得了巨大的战略优势。绝大多数已经将RISC-V作为其内部ISA收敛。使用相同原生语言的L1实现了更紧密和更高效的集成。Justin Drake描述了一个"原生rollup"的未来，其中L2本质上是L1自身执行环境的专用实例，使用神圣的L1 VM进行无缝结算。这种对齐将：

- **简化技术栈**：L2团队不再需要弥合其内部RISC-V执行与EVM之间的复杂差距
- **启用工具和代码重用**：为L1 RISC-V环境开发的编译器、调试器和形式验证工具可以直接被L2重用
- **对齐经济激励**：L1 gas成本将更准确地反映ZK证明RISC-V执行的实际成本，创建更理性的经济模型

**开发者和用户的新时代**

对于那些在以太坊上构建的人来说，过渡承诺是进化性的而不是破坏性的。

对于开发者，关键好处是访问更广泛、更成熟的软件开发世界。正如Vitalik Buterin所指出的，开发者将"能够用Rust编写合约，这两种选择开始相互共存"[2]。同时，他预测"Solidity和Vyper将长期保持流行"[2]，因为它们对智能合约逻辑的优雅性。通过LLVM工具链使用主流语言及其庞大库的能力是一个变革性转变。它打开了Vitalik描述的"NodeJS类型体验"的大门，"你基本上使用相同的语言编写链上代码和链下代码"[2]。

对于用户，最终回报是一个更便宜、更强大的网络。预计约100倍的证明成本降低——从每笔交易数美元到几分之一美分——直接转化为L1和L2结算的更低费用。这种经济可行性解锁了"千兆gas L1"愿景，目标是L1上约10,000 TPS，实现更复杂、高价值链上应用的未来。

**Succinct Labs和SP1：今天证明未来**

RISC-V的理论好处已经在实践中被Succinct Labs等团队证明。他们的工作作为整个提案的有力案例研究。

Succinct的SP1是一个基于RISC-V构建的高性能、开源zkVM，验证了新架构方法。其"预编译中心"哲学完美说明了如何解决EVM的密码瓶颈。不是依赖缓慢的硬编码预编译，SP1将Keccak哈希等密集操作卸载到通过标准ECALL指令调用的专用、手工优化的ZK电路。这提供了定制硬件的性能与软件的灵活性。

实际影响已经可见。OP Succinct产品使用SP1来"ZK化"乐观Rollup。正如Succinct联合创始人Uma Roy[3]所解释的：

"你的OP Stack rollup，不再需要等待七天才能最终确定和提款...现在实现一小时最终确定。这是更快的最终确定，这非常棒。"

**以太坊如何降低风险**

RISC-V的一个关键优势是它使形式验证的圣杯——数学证明系统正确性——成为可实现的目标。EVM通过黄皮书用自然语言指定，众所周知难以形式化。相比之下，RISC-V有一个官方的、机器可读的SAIL规范，这为其行为提供了明确的"黄金参考"。

这为更强的安全提供了清晰路径。正如以太坊基金会的Alex Hicks所指出的，工作已经在进行中以正式"验证zkVM RISC-V电路对抗提取到Lean中的官方RISC-V规范"。这是向前迈出的巨大一步，将信任从易错的人类实现转移到可验证的数学证明。

**过渡的主要风险**

尽管有其优势，基于RISC-V的L1引入了新的强大挑战。

**Gas计量**。为通用ISA创建确定性和公平的gas模型是最困难的未解决问题之一。简单的指令计数容易受到拒绝服务攻击（例如，攻击者可以制作一个程序，重复错过缓存，以极低的gas费用造成高资源使用）。

**工具链安全和可重现构建问题**。这可能是最重要且被低估的风险。安全模型从信任链上VM转移到信任每个开发者使用的链下编译器（如LLVM）。这些编译器极其复杂，已知包含错误。攻击者可能利用编译器错误从看似良性的源代码生成恶意字节码。此外，确保链上的编译二进制文件完全对应于特定的公共源代码——"可重现构建"问题——异常困难，因为构建环境中的微小差异可能产生不同的二进制文件。

**缓解策略**

前进道路需要多层防御策略。

**分阶段推出**。渐进的、多阶段过渡计划是主要风险缓解策略。通过首先将RISC-V作为预编译替换引入，然后在双VM环境中，社区可以在进行任何不可逆转更改之前在低风险环境中获得操作经验并建立信心。

**全面审计：模糊测试和形式方法**。虽然形式验证提供了终极目标，但它必须辅以持续、激进的测试。正如Diligence Security的Valentine在Ethproofs通话中展示的，他们的Argus模糊器已经在领先的zkVM中发现了11个关键的健全性和完整性错误[2]。这证明即使设计最好的系统也有只能通过严格、对抗性测试才能发现的漏洞。

**标准化**。为了避免生态系统碎片化，社区汇聚在单一、标准的RISC-V配置文件上至关重要。这很可能是具有Linux兼容ABI的RV64GC，因为这种组合提供了主流语言和工具的最广泛支持，最大化新生态系统的好处。

**可验证未来的黎明**

用RISC-V替换以太坊虚拟机的提案代表了网络未来的关键和大胆愿景。这不仅仅是增量升级，而是以太坊执行层的基本重新架构，旨在解决根深蒂固的可扩展性瓶颈、简化协议复杂性，并使平台与通用计算的更广泛世界保持一致。

过渡取决于一系列核心权衡：ZK原生架构的巨大性能收益与向后兼容性的关键需求；更简单协议的安全优势与EVM巨大网络效应的惯性；通用生态系统的力量与依赖复杂第三方工具链的风险。

最终，这种架构转变是实现更广泛"精简以太坊"愿景"精简执行"承诺的关键。它将L1从简单的智能合约平台转变为高效安全的结算和数据可用性层，专门构建以支持可验证计算宇宙。旅程很长，但方向很明确。正如Vitalik Buterin[2]所述，最终目标是：

"终点线包括...ZK证明一切。"

像Ethproofs这样的倡议提供了导航这条道路所需的客观数据和协作论坛，而像Succinct Labs这样的团队通过其SP1 zkVM的实际实现作为这个未来样子的工作蓝图。通过拥抱RISC-V，以太坊不仅仅是在解决自己的扩展瓶颈；它正在定位自己成为下一代互联网的基础信任层，由哈希和签名之后的第三个伟大密码原语驱动：SNARK。

证明世界的软件。

**相关链接：**

[1] https://blog.ethereum.org/2025/07/31/lean-ethereum - Lean Ethereum 官方博客

[2] https://www.youtube.com/watch?v=Iu7SJYMpOsE - Vitalik Buterin 解释视频

[3] https://www.youtube.com/watch?v=rJiEV7jJFl4 - ETHProofs Call #4 讨论视频

---

文章发布 SoP：

- [ ]  编写文章
- [ ]  使用 ChatGPT 对排版和语法问题进行优化：
    
    ```jsx
    请将下面文章内容按照《中文排版指北》的排版规则进行排版优化，并对细节语法问题和内容在不改变原意的情况下进行优化：
    ```
    
- [ ]  在群里发布 notion 草稿、预览进行 preview 和建议
- [ ]  编辑到微信公众号，发布 review 到 wx 群并设置截止时间
- [ ]  正式发布微信公众号
- [ ]  发布 Substack
- [ ]  推特 Summary 和引用 Substack
- [ ]  Telegram 社群宣发（Twitter 链接）和置顶
