发布内容：

---

作者：@0xJaehaerys

原文链接：https://x.com/0xJaehaerys/status/1960051628129865918

## 标题：告别 EVM，拥抱 RISC-V：通往 1 万 TPS 与 ZK 万物

## 引言：

以太坊正迈向自诞生以来最大的一次执行层重构：在长期路线中以 RISC-V 取代 EVM。动因来自 ZK 原生未来下的执行与证明瓶颈：当前 zkEVM 依赖解释器导致 50–800 倍开销，预编译合约引入高复杂度与共识风险，EVM 的 256 位栈架构在证明成本上不经济。RISC-V 以极简指令集、成熟 LLVM 生态、可形式化的 SAIL 规格与硬件加速路径，为以太坊提供了更简单、可验证且可扩展的执行内核。按阶段推进：先以 RISC-V 替换预编译，再与 EVM 双栈共存，最终在 RISC-V 内以合约形式重实现 EVM，实现协议简化与兼容性统一。这一转变将重塑 L2 版图、开发者体验与证明经济，打开迈向“ZK-snark 一切”的可验证计算时代。

## 正文：

### TL;DR

- 在 ZK 优先的未来，**EVM 成为瓶颈**：解释器型 zkEVM 带来 50–800× 证明开销；预编译膨胀协议复杂度与风险；256 位栈对证明极不友好。
- **RISC-V 的解法**：~47 条极简指令、成熟 LLVM 生态（Rust、C++、Go）、已成 zkVM 事实标准、形式化 SAIL 规格、具备硬件证明路径（ASIC/FPGA）。
- **三阶段迁移**：预编译替换；EVM 与 RISC-V 双 VM 共存且可互调；在 RISC-V 内重实现 EVM（Rosetta）。
- **生态影响**：乐观型 Rollup 可无缝编译新 VM 至现有证明程序；ZK Rollup 与 L1 原生同构，成本与复杂度显著下降。
- **开发者/用户收益**：直接在 L1 使用 Rust/Go/Python 库；证明成本有望 ~100× 下降；迈向约 1 万 TPS 的 Gigagas L1 愿景。

### 分析（引用与概括）

#### 核心论点与 Vitalik 的洞察
- **解释器开销的根本问题**：当前 zkEVM 并非直接证明 EVM，而是证明"EVM 解释器 → 编译为 RISC-V"的执行链路。这层额外解释带来 50–800× 的性能损失，在哈希等瓶颈优化后，将成为 80–90% 证明时间的最终障碍。
- **Vitalik 的核心洞察**：["如果 zkVM 的实现方式是将 EVM 执行编译为最终的 RISC-V 代码，那为何不直接向开发者暴露底层的 RISC-V？这样就能完全移除整层外部虚拟机开销。"][2] 移除这层可释放近 100× 的执行效率提升。
- **预编译债务陷阱**：Vitalik 直言["预编译对我们来说一直很糟糕...它们极大地膨胀了以太坊的可信代码库...它们是我们最接近共识失败的一些最严重失误的罪魁祸首。"][2] 单个预编译（如 modexp）的包装代码复杂度甚至超过整个 RISC-V 解释器。

#### 生态影响与 Rollup 重新洗牌
- **Optimistic Rollup 的适应性**：正如 Optimism 联合创始人解释："乐观链不会因为我们切换到 RISC-V 而中断。你只需将 RISC-V VM 编译进证明程序。不需要使用 Asterisc。现有的基于 MIPS 的证明系统不会中断——你只需将 RISC-V VM 编译为 MIPS。"欺诈证明模型保持完整，调整更多是工程细节。
- **ZK Rollup 的战略优势**：绝大多数已收敛于 RISC-V 作为内部 ISA。与 L1 同构后，技术栈简化、工具链可复用、经济激励对齐，迈向"原生 Rollup"时代。
- **开发者体验的革命性变化**：Vitalik 预测开发者将["能够用 Rust 编写合约，这两种选择开始共存。"][2] 同时["Solidity 和 Vyper 将继续流行很长时间"][2]，形成类似"NodeJS 类型的体验，基本上使用相同的语言编写链上代码和链下代码。"

#### 风险与缓解策略的深度分析
- **Gas 计量的根本挑战**：通用 ISA 的确定性公平计费是未解决难题。简单指令计数易受 DoS 攻击（如缓存未命中攻击），需要超越"指令计数"的微架构感知计费模型。
- **工具链安全与可复现构建**：安全模型从信任链上 VM 转向信任链下编译器（如 LLVM）。编译器漏洞可被利用生成恶意字节码，且"可复现构建"问题极其困难——构建环境的微小差异可产生不同二进制。
- **形式化验证的突破**：RISC-V 的 SAIL 规格为形式化验证提供"黄金标准"，EF 的 Alex Hicks 指出工作已在进行中，将"针对官方 RISC-V 规格验证 zkVM RISC-V 电路"。

#### 最终愿景与战略意义
- **从"智能合约 VM"到"可验证信任层"**：以太坊演进为"极简、可验证的互联网信任层"，以"ZK-snark 一切"为技术终点线。
- **核心权衡**：ZK 原生架构的巨大性能收益 vs. 向后兼容的迫切需求；更简单协议的安全收益 vs. EVM 庞大网络效应的惯性；通用生态的力量 vs. 依赖复杂第三方工具链的风险。
- **实证验证**：Succinct Labs 的 SP1 zkVM 已证明 RISC-V 路径的可行性，OP Succinct 将 OP Stack 的 7 天退出缩短至 1 小时，展示可行的证明网络经济模型。

### 以太坊的十字路口与愿景

- **ZK 终局**：以太坊正被重构为 ZK 原生系统，技术“终点线”是将各层全面 Snark 化（参见 [Lean Ethereum](https://blog.ethereum.org/2025/07/31/lean-ethereum)[1]、[Vitalik 演讲](https://www.youtube.com/watch?v=Iu7SJYMpOsE)[2] 与 [Ethproofs Call #4](https://www.youtube.com/watch?v=rJiEV7jJFl4)[3]）。
- **Lean Ethereum**：协议朝“精简共识、精简数据、精简执行”演进，问题核心转向 EVM 是否成为未来扩展性的主瓶颈。

### 解释器开销：zkEVM 的结构性问题

- **额外解释层**：多数 zkEVM 并非直接证明 EVM，而是证明“EVM 解释器 → 编译为 RISC-V”的执行；这层外包导致巨量性能损失。
- **去解释化的直觉**：既然最终都落在 RISC-V，为何不直接向开发者暴露 RISC-V，移除整层 VM 外壳，释放近两个数量级的执行效率潜力（首次出处见 [Vitalik 演讲](https://www.youtube.com/watch?v=Iu7SJYMpOsE)[2]）。

### 预编译债务：复杂度与风险的源头

- **协议膨胀**：预编译将复杂加密逻辑硬编码进客户端，扩大可信代码库，历史上多次接近共识风险边缘。
- **演进受阻**：新增预编译需硬分叉与治理协调，抑制了新型密码学原语的引入节奏；因此建议暂停新增预编译，改用可审计的 RISC-V 程序白名单。

### EVM 的时代技术债：256 位栈与编译优化受限

- **位宽不经济**：大多数合约仅需 32/64 位整数；在 ZK 中，256 位带来 2–4× 的证明复杂度膨胀。
- **栈机劣势**：相较寄存器架构，指令数更多、优化空间更小，不利于现代编译器发挥。

### RISC-V 的蓝图：以极简与开放为基础

- **开放标准胜于定制 ISA**：得益于 LLVM，全民级语言可直接编译至 RISC-V；工具链难以自建，RISC-V 让以太坊“免费继承”工业级编译基础（首次出处见 [Lean Ethereum](https://blog.ethereum.org/2025/07/31/lean-ethereum)[1]）。
- **极简即安全**：~47 条基础指令令可信计算基更小、更可审计、可形式化验证（SAIL 规格）。
- **ZK 领域事实标准**：可证明以太坊区块的 zkVM 中，绝大多数已选择 RISC-V 作为后端。
- **特权架构与更强隔离**：用户态合约经 ECALL 与内核态执行内核交互，形成“硬件级”安全边界，优于纯软件沙箱模型。

### Vitalik 的三阶段迁移路线

- **阶段 1：预编译替换**：以白名单 RISC-V 程序替代现有/新增预编译，在低风险场景主网实测。
- **阶段 2：双 VM 并存**：部署时指示字节码类型（EVM 或 RISC-V），两类合约可相互调用，ECALL 作为桥接机制。
- **阶段 3：EVM 内嵌于 RISC-V**：在 RISC-V L1 内以形式化验证的合约形态重实现 EVM，客户端仅需维护一个最小执行引擎。

### 对 Rollup 与生态的涟漪效应

- **乐观型 Rollup**：不被“RISC-V 化”的 L1 打破，只需将新 VM 编译进既有（如 MIPS 基）欺诈证明程序，更多是工程层面的计费与效率优化。
- **ZK Rollup**：与 L1 同构后，技术栈简化、工具链可复用、成本计价更贴近真实 ZK 证明成本，迈向“原生型 Rollup”。

### 开发者与用户的收益

- **开发者**：直接使用 Rust/Go/Python 生态与调试/形式化工具；Solidity/Vyper 仍将长期共存以覆盖合约表达优势。
- **用户**：证明成本从美元级降至分厘级，L1 与结算费用下探，为高复杂度、高价值应用打开空间（首次出处见 [Lean Ethereum](https://blog.ethereum.org/2025/07/31/lean-ethereum)[1] 与 [Vitalik 演讲](https://www.youtube.com/watch?v=Iu7SJYMpOsE)[2]）。

### 实证进展：Succinct Labs 与 SP1

- **SP1 zkVM（RISC-V）**：以“预编译中心化问题 → ECALL 调用专用 ZK 电路”的思路，将 Keccak 等重计算外包给手工优化电路，兼具性能与灵活性（首次出处见 [Lean Ethereum](https://blog.ethereum.org/2025/07/31/lean-ethereum)[1]）。
- **OP Succinct**：为 OP Stack 提供 ZK 化路径，将 7 天退出缩短到约 1 小时，展示可行的证明网络经济模型与工程落地（首次出处见 [Ethproofs Call #4](https://www.youtube.com/watch?v=rJiEV7jJFl4)[3]）。

### 主要风险

- **Gas 计量**：通用 ISA 的计费需防止缓存未命中等微架构攻击面；简单按指令计费可能被 DoS。
- **工具链与可复现构建**：信任锚由链上 VM 转移至链下编译器（如 LLVM），需解决编译器漏洞与“同源可证”二进制映射难题。

### 风险缓释策略

- **分阶段推进**：先从低风险面引入 RISC-V，积累运行经验与度量数据。
- **形式化与模糊测试并进**：在对齐 SAIL 的同时，以模糊测试持续覆盖真实实现的“声音性/完备性”缺陷。
- **标准化配置**：社区应收敛至统一 RISC-V 配置（如 RV64GC + Linux 兼容 ABI），最大化语言与工具复用。

### 结语：走向可验证的未来

- 将 EVM 迁移至 RISC-V 并非微调，而是对执行层的根式重构；其回报是极简、可验证、与通用计算世界深度对齐的以太坊执行内核。随着形式化验证与硬件加速铺路，“ZK-snark 一切”的愿景具备了工程与经济可行性（首次出处见 [Lean Ethereum](https://blog.ethereum.org/2025/07/31/lean-ethereum)[1]）。

**相关链接：**

[1] 以太坊基金会博客《Lean Ethereum》：https://blog.ethereum.org/2025/07/31/lean-ethereum

[2] Vitalik Buterin 演讲视频：Long-term L1 execution layer proposal（YouTube）：https://www.youtube.com/watch?v=Iu7SJYMpOsE

[3] Ethproofs Call #4（YouTube）：https://www.youtube.com/watch?v=rJiEV7jJFl4

---

文章发布 SoP：

- [ ]    编写文章
- [ ]    使用 ChatGPT 进行中文排版与语法优化（不改动原意）
- [ ]    在群内发布 Notion 草稿征求意见
- [ ]    编辑到微信公众号并发起 Review（设定截止时间）
- [ ]    正式发布微信公众号
- [ ]    发布 Substack
- [ ]    Telegram 社群宣发并置顶（引用 Twitter 链接）
