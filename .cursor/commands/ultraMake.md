# /ultraMake 命令规范

## 触发短语
- `/ultraMake [目标文件]`

## 输入参数
- 必填：`[目标文件]`（工作区现有 Markdown/文档文件名，不含路径时默认仓库根目录）

## 功能描述
执行完整的文档处理流程，包括生成发布内容页、质量检查、去除超链接和去除数字编号等操作，最终生成多个版本的文档。

## 执行流程

### 第一阶段：生成发布内容页
1. 执行 `/makeFile [目标文件]` 命令
2. 生成 `[目标文件-发布内容页].md` 文件

### 第二阶段：质量检查与修复
3. 执行 `/review [目标文件-发布内容页].md` 命令
4. 根据检查结果进行问题修复
5. 用户确认修复完成后继续

### 第三阶段：并行处理（同时执行）
6. **并行执行 3.1 和 3.2**：
   - **3.1** 执行 `/removeLink [目标文件-发布内容页].md`
   - **3.2** 执行 `/removeNumber [目标文件-发布内容页].md`

## 详细执行步骤

### 步骤 1：生成发布内容页
- 调用 `/makeFile` 命令处理原文件
- 生成符合发布标准的 `[目标文件-发布内容页].md`
- 确保文件结构符合 `rules/standardFile.md` 要求

### 步骤 2：质量检查
- 调用 `/review` 命令检查发布内容页
- 生成详细的检查报告
- 识别并列出需要修复的问题
- 等待用户确认修复或自动修复问题

### 步骤 3：并行处理
同时启动两个处理进程：

#### 进程 3.1：去除超链接
- 执行 `/removeLink [目标文件-发布内容页].md`
- 生成 `[目标文件-发布内容页-去除超链接].md`
- 保留链接文本和编号，去除链接地址

#### 进程 3.2：去除数字编号
- 执行 `/removeNumber [目标文件-发布内容页].md`
- 生成 `[目标文件-发布内容页-去除数字编号].md`
- 删除数字编号和相关链接区域，修复多余空格

## 输出文件
执行完成后将生成以下文件：
1. `[目标文件-发布内容页].md` - 标准发布版本
2. `[目标文件-发布内容页-去除超链接].md` - 无超链接版本
3. `[目标文件-发布内容页-去除数字编号].md` - 无数字编号版本

## 执行状态跟踪
- ✅ 步骤 1：生成发布内容页
- ✅ 步骤 2：质量检查与修复
- 🔄 步骤 3.1：去除超链接（并行执行）
- 🔄 步骤 3.2：去除数字编号（并行执行）

## 错误处理
- 如果任何步骤失败，停止执行并报告错误
- 提供详细的错误信息和修复建议
- 支持从失败点重新开始执行

## 产物约束
- 所有输出文件与目标文件在同一目录下
- 保持原文件的格式和结构
- 确保并行处理不会产生文件冲突
- 输出文件命名遵循既定规范

## 校验清单
- [ ] 成功执行 `/makeFile` 命令
- [ ] 生成标准发布内容页文件
- [ ] 成功执行 `/review` 命令
- [ ] 完成质量检查问题修复
- [ ] 并行执行 `/removeLink` 命令
- [ ] 并行执行 `/removeNumber` 命令
- [ ] 生成所有预期输出文件
- [ ] 验证文件内容正确性

## 示例
- 输入：`/ultraMake @Member of AI Staff.md`
- 输出：
  - `Member of AI Staff-发布内容页.md`
  - `Member of AI Staff-发布内容页-去除超链接.md`
  - `Member of AI Staff-发布内容页-去除数字编号.md`

## 注意事项
- 确保目标文件存在于工作区中
- 并行处理时确保文件访问不会冲突
- 质量检查阶段需要用户交互确认
- 所有中间文件都会保留，便于调试和验证